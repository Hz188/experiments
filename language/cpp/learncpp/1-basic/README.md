# C++ Basic

1. statement 语句：一种指令，让计算机执行某种动作
    - 大多数C++语句都以`;`结尾，但不是全部
    - 单个可以被编译为许多机器语言指令
2. sytax 语法：程序正确构造的规则，叫做语法
3. comment 注释：程序员可读的文本，会被编译器忽略
    - 单行：`//`
    - 多行：`/**/`
4. data,value 数据、值：指令执行会产生结果，结果通过**data/数据**承载
    - 数据 = 可以被计算机移动、处理、存储的任何信息
    - 值 = 单个的数据，比如 `a`,`5`,`"hello"`
5. object,variable 对象和变量：C++不建议我们直接访问内存，而是通过**object/对象**间接访问
    - 对象 = 可以存储值的存储区域（通常是内存），并具有其他的一些相关属性
    - 对象，可以是匿名的，但更多时候我们使用标识符来明明对象，叫做**variable/变量**
    - 概括：对象用于在内存中存储一个值，变量是有名称的对象，命名的对象让我们可以在后面再次引用他们
6. 变量实例化
    - 创建一个变量，要通过声明语句：叫做**definition/定义**
    - 例如：`int x;`，编译器看到声明语句时，它会知道我们定义了一个变量，起了名字叫做`x`，类型是`int`，这之后，编译器每次见到`x`，它就会知道我们在引用这个变量
    - 当程序运行时，变量会被**instantiation/实例化**
        - 实例化 = 创建对象并分配内存地址，所以必须先实例化，才能将其用于存储值
        - 实例化的对象 = **实例/instance**
7. 数据类型
    - 数据类型决定了对象存储的值的类型，C++中变量的类型必须在编译时已知


## 赋值和初始化

变量赋值

- 定义变量后，可以通过赋值运算符`=`为其指定一个值，这叫做**assignment/赋值**
- 默认情况下，`=`会拷贝右侧的值到左侧的变量，也叫做**拷贝赋值**

初始化

- 赋值的特点很明显，需要两个语句，一个定义 + 一个赋值
- **initialization/初始化** = 二合一，我们在定义的时候为其指定初始值
- **initializer/初始化器** = 用于初始化一个对象的语法

初始化类型

- 默认初始化
    - 不提供初始化器，叫做默认初始化，通常默认初始化不执行操作，保留变量的不确定值
- 拷贝初始化
    - 在等号后提供初始化值，叫做拷贝初始化，继承自C语言
    - 现代C++下用的越来越少，因为复杂类型初始化效率过低，但在C++17中解决了大部分问题
    - 隐式赋值或者值转换时也会使用拷贝初始化：传参、按值返回、按值捕获异常
- 直接初始化
    - 括号内提供初始化值，叫做直接初始化
    - 直接初始化最初用来初始化复杂对象（类类型，构造函数），现代C++也用的少，主要是被列表初始化取代
        - 一个原因是：难以区分函数和变量，`int x(0);` <-> `int x();`
    - 但列表初始化也有一些不方便之处，直接初始化还是会被使用
- 列表初始化（统一初始化、大括号初始化）
    - 现代C++初始化对象的方法，使用大括号，有三种形式
    - 列表初始化不允许缩窄变换：`int x{4.5};  // error`，但拷贝初始化和直接初始化会无视小数部分，初始化整数部分
    1. 直接列表初始化
    2. 拷贝列表初始化
    3. 值初始化/零初始化：空大括号初始化，初始化为0或者空，归零的情况下叫做零初始化


## [[maybe_unused]]

有些编译器对于未使用的初始化变量，可能会发出警告或者编译错误，可以使用这个属性解决，见maybe_unused.cpp

## 标准输入输出

- `std::cout <<`,`std::cin >>`,`std::endl`
    - `<<` 插入操作符
    - `>>` 提取操作符
- `std::cout`是缓冲的
    - 输出通常不会被立刻发送到控制台，而是在“排队”存储在缓冲中，缓冲会定期**flush/刷新**，缓冲中所有的数据都会一起送到控制台
- `std::endl` 和 `\n`
    - 前者通常效率低下，因为执行了两个工作：输出换行符，将光标移动到下一行、刷新缓冲区
        - 如果输出多行endl结束的文本，效率很低，因为C++的输出系统设计为定期自刷新，而不是我们显式刷新缓冲区
    - 为了不刷新缓冲区来输出换行符，可以使用`\n`


## 未初始化变量和未定义行为

C++不会自动的将变量进行零值的初始化

- 当一个未初始化的变量被赋予了一个内存地址的时候，其默认值就是当前内存地址中的任何值（或者说是垃圾值）
- 这种变量称为未初始化变量

使用未初始化的变量的值是第一个未定义行为的示例

- **Undefined behavior/未定义行为**是执行的代码的结果没有被C++明确定义，就叫做未定义行为

Implementation-defined behavior and unspecified behavior

- 所谓是实现定义的行为，指的是某个行为其具体的结果取决于实现，比如有的sizeof(int)有的平台是2有的平台是4，就是不同的平台实现不同
- 未指定行为基本等于实现定义的行为，行为由实现决定，但这种实现没被明确的记录
- 通常应该避免这两种行为，虽然不算错误，但程序可能会不能按预期一样工作


## 字面值和运算符

- **literal/字面值**也叫做字面值常亮，是直接插入到源代码中的固定值
- **operator/运算符**是对**operand/操作数**执行特定的操作的符号表示
    - **arity/元**
    - **unary/一元**运算符
    - **binary/二元**运算符
    - **Ternary/三元**运算符
    - **nullary/空元**运算符
- 返回值和副作用
    - 除了得到一个作为结果的返回值外，运算符往往也会有一些其他的可观察的效果，被称为**运算符具有副作用**
    - 像`=`的副作用就是将值赋给左边的变量，同时返回值`5`

## 表达式

**expression/表达式**是字面值、变量、运算符、函数调用的一个序列，用以计算出一个值

- 求出这个值的过程叫做**evaluate**
- 生成的单个值叫做**result**
- 大多数表达式都用于计算出一个值，但也有表达式用于标识对象（这个对象可以被eval来获取对象hold的值）
- 表达式不以`;`结尾，不能单独编译，总是作为语句的一部分计算，比如`int x {2 + 3};`
    - 2+3是一个表达式，无分号，分号表示这是一个语句，包含了一部分表达式

## 表达式语句

表达式必须作为语句的一部分，不能单独编译，但可以将表达式转化为等价的**expression statement/表达式语句**

- 表达式语句 = 表达式 + `;`
- 使用表达式语句的时候，返回值会被丢弃

子表达式、完整表达式、复合表达式

- 子表达式作为操作数，完整表达式是不是子表达式的表达式，复合表达式是包含两种或多种运算的表达式