
# 选或不选

0-1背包和完全背包是非常重要的dp模型，是**选或不选**思想的代表

- 0-1背包
    - 494.目标和
- 完全背包
    - 322.零钱兑换
- 涉及知识点
    - 回溯
    - 记忆化搜索
    - 递推
    - 空间优化：两个数组（滚动数组）
    - 空间优化：一个数组（从后往前）


## 0-1 背包

有n**个**物品，第i个物品体积w[i]，价值v[i]，每个物品至多选一个，背包容量为capacity，求不超过capacity的最大价值和

- 回溯三问
    - 当前操作？枚举**第**i个物品选或不选：不选，剩余容量不变；选，剩余容量减少w[i]
    - 子问题？在剩余容量为c时，从**前**i个物品中得到的最大价值和
    - 下一个子问题？分类讨论
        - 不选：在剩余容量为c时，从**前**i—1个物品中得到的最大价值和
        - 选：在剩余容量为C一w[i]时，从**前**i-1个物品中得到的最大价值和
    - dfs(i, c) = max( dfs(i-1, c), dfs(i-1, c-w[i]) + v[i] )
- 常见变形
    - 至多装capacity，求方案数/最大价值和
    - **恰好**装capacity，求**方案数**/最大/最小价值和
        - 最大值-> dfs(i, c) = max( dfs(i-1, c), dfs(i-1, c-w[i]) + v[i] )
        - 最小值-> dfs(i, c) = min( dfs(i-1, c), dfs(i-1, c-w[i]) + v[i] )
        - **方案数**-> dfs(i, c) = dfs(i-1, c) + dfs(i-1, c-w[i])
    - 至少装capacity，求方案数/最少价值和
- 494题：dfs(i, c) = dfs(i-1, c) + dfs(i-1, c-w[i])
    - 递推
        - dp[i]\[c\] = dp[i-1]\[c\] + dp[i-1][c-w[i]]
        - 处理负数下标：dp[i+1]\[c\] = dp[i]\[c\] + dp[i][c-w[i]]

## 完全背包

有n**种**物品，第i种物品体积w[i]，价值v[i]，每个物品无限次重复选，背包容量为capacity，求不超过capacity的最大价值和

- 回溯三问
    - 当前操作？枚举第i种物品选或不选：不选，剩余容量不变；选，剩余容量减少w[i]
    - 子问题？在剩余容量为c时，从前i种物品中得到的最大价值和
    - 下一个子问题？分类讨论
        - 不选：在剩余容量为c时，从前i—1种物品中得到的最大价值和
        - 选：在剩余容量为C一w[i]时，从前**i**种物品中得到的最大价值和
    - dfs(i, c) = max( dfs(i-1, c), dfs(i, c-w[i]) + v[i] )
- 常见变形
    - 至多装capacity，求方案数/最大价值和
    - 恰好装capacity，求方案数/最大/最小价值和
    - 至少装capacity，求方案数/最少价值和
- 322.题：dfs(i, c) = min(dfs(i-1, c), dfs(i-1, c-w[i])+1)
    - 递推
        - dp[i]\[c\] = min(dp[i-1]\[c\], dp[i-1][c-w[i]]+1)
        - dp[i+1]\[c\] = min(dp[i]\[c\], dp[i][c-w[i]]+1)

## 空间优化 一个数组的遍历顺序

结论：
- 0-1背包倒序
- 完全背包正序

怎么思考：[时间戳](https://www.bilibili.com/video/BV16Y411v7Y6?t=860.6)

- 评论区：在只用一个一维数组的情况下，要注意转移来源 1. 不能被覆盖 2. 必须已经计算出来。按照这个要求，正序遍历会导致 0-1 背包状态被覆盖，而完全背包则是正确的（转移来源被计算出来，且不存在被覆盖的问题）；逆序遍历对于 0-1 背包是正确的（转移来源是上一行的，早就被计算出来了且没有被覆盖），而完全背包则不行（转移来源没有被计算出来）。

## 题目变体

前面0-1背包和完全背包都是恰好capacity 求方案数、最大、最小

那么如果是另外两种情况呢，[时间戳](https://www.bilibili.com/video/BV16Y411v7Y6?t=886.5)

1. 至多装capacity
2. 至少装capacity

## 选哪个

- 像322题，还可以用：选哪个的视角来进行dp，留作练习

## 边界条件总结

- [视频评论区](https://www.bilibili.com/video/BV16Y411v7Y6)